{
    "annotations": {
        "list": [
            {
                "builtIn": 1,
                "datasource": "-- Grafana --",
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "target": {
                    "limit": 100,
                    "matchAny": false,
                    "tags": [],
                    "type": "dashboard"
                },
                "type": "dashboard"
            }
        ]
    },
    "editable": true,
    "fiscalYearStartMonth": 0,
    "gnetId": null,
    "graphTooltip": 0,
    "id": 13,
    "iteration": 1634484070429,
    "links": [],
    "liveNow": false,
    "panels": [
        {
            "datasource": "${datasource}",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds",
                        "seriesBy": "last"
                    },
                    "custom": {
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "drawStyle": "line",
                        "fillOpacity": 30,
                        "gradientMode": "scheme",
                        "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                        },
                        "lineInterpolation": "smooth",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                            "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": true,
                        "stacking": {
                            "group": "A",
                            "mode": "none"
                        },
                        "thresholdsStyle": {
                            "mode": "off"
                        }
                    },
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            },
                            {
                                "color": "light-red",
                                "value": -50000
                            },
                            {
                                "color": "light-green",
                                "value": 0
                            }
                        ]
                    },
                    "unit": "watt"
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "ac_measurements power site"
                        },
                        "properties": [
                            {
                                "id": "custom.hideFrom",
                                "value": {
                                    "legend": true,
                                    "tooltip": true,
                                    "viz": true
                                }
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "power line"
                        },
                        "properties": [
                            {
                                "id": "custom.hideFrom",
                                "value": {
                                    "legend": true,
                                    "tooltip": true,
                                    "viz": true
                                }
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "line"
                        },
                        "properties": [
                            {
                                "id": "custom.hideFrom",
                                "value": {
                                    "legend": true,
                                    "tooltip": true,
                                    "viz": true
                                }
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "power"
                        },
                        "properties": [
                            {
                                "id": "custom.hideFrom",
                                "value": {
                                    "legend": true,
                                    "tooltip": true,
                                    "viz": true
                                }
                            }
                        ]
                    }
                ]
            },
            "gridPos": {
                "h": 8,
                "w": 14,
                "x": 0,
                "y": 0
            },
            "id": 57,
            "options": {
                "legend": {
                    "calcs": [],
                    "displayMode": "hidden",
                    "placement": "bottom"
                },
                "tooltip": {
                    "mode": "multi"
                }
            },
            "targets": [
                {
                    "query": "production = from(bucket: \"multisma2\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"ac_measurements\" and r._field == \"power\" and r._inverter == \"site\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> yield(name: \"production\")\n  \nconsumption = from(bucket: \"cs24\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"power\" and r._field == \"line\")\n  |> map(fn: (r) => ({ r with _time: r._time, _value: r._value * -1.0 }))\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> yield(name: \"consumption\")\n\nunion(tables: [production, consumption])\n  |> drop(columns: [\"_inverter\", \"_measurement\", \"_start\", \"_stop\"])\n  |> truncateTimeColumn(unit: 10s)\n  |> pivot(rowKey:[\"_time\"], columnKey: [\"_field\"], valueColumn: \"_value\")\n  |> map(fn: (r) => ({ r with Delta: r.power + r.line }))\n  |> yield(name: \"union\")\n\n",
                    "refId": "Delta"
                }
            ],
            "title": "Net Power",
            "type": "timeseries"
        },
        {
            "datasource": null,
            "gridPos": {
                "h": 1,
                "w": 2,
                "x": 14,
                "y": 0
            },
            "id": 65,
            "options": {
                "content": "",
                "mode": "markdown"
            },
            "pluginVersion": "8.2.1",
            "title": "${period} (kWh)",
            "type": "text"
        },
        {
            "datasource": "${datasource}",
            "description": "",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "palette-classic"
                    },
                    "custom": {
                        "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                        }
                    },
                    "decimals": 0,
                    "mappings": [],
                    "unit": "percent"
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "HotWater"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "Hot Water"
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "HeatPump"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "Heat Pump"
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "MainFloor"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "Living Area"
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "Vehicles"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "EV Charging"
                            }
                        ]
                    }
                ]
            },
            "gridPos": {
                "h": 8,
                "w": 8,
                "x": 16,
                "y": 0
            },
            "id": 55,
            "options": {
                "displayLabels": [],
                "legend": {
                    "displayMode": "list",
                    "placement": "right",
                    "values": [
                        "percent"
                    ]
                },
                "pieType": "pie",
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                },
                "tooltip": {
                    "mode": "single"
                }
            },
            "repeat": "Periods",
            "repeatDirection": "h",
            "targets": [
                {
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._field == lookup.${period}.f and (r._device == \"_kitchen\" or r._device == \"line\"))\n  |> drop(columns: [\"_location\"])\n  |> pivot(rowKey:[\"_time\"], columnKey: [\"_device\"], valueColumn: \"_value\")\n  |> map(fn: (r) => ({ _time: r._time, Kitchen:\n      if not exists r._kitchen or r._kitchen == 0.0 then 0.0\n      else if not exists r.line or r.line == 0.0 then 0.0\n      else r._kitchen / r.line * 100.0 } ))\n  |> yield(name: \"device\")\n",
                    "refId": "Kitchen"
                },
                {
                    "hide": false,
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._field == lookup.${period}.f and (r._device == \"_basement\" or r._device == \"line\"))\n  |> drop(columns: [\"_location\"])\n  |> pivot(rowKey:[\"_time\"], columnKey: [\"_device\"], valueColumn: \"_value\")\n  |> map(fn: (r) => ({ _time: r._time, Basement:\n      if not exists r._basement or r._basement == 0.0 then 0.0\n      else if not exists r.line or r.line == 0.0 then 0.0\n      else r._basement / r.line * 100.0 } ))\n  |> yield(name: \"device\")\n",
                    "refId": "Basement"
                },
                {
                    "hide": false,
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._field == lookup.${period}.f and (r._device == \"_vehicles\" or r._device == \"line\"))\n  |> drop(columns: [\"_location\"])\n  |> pivot(rowKey:[\"_time\"], columnKey: [\"_device\"], valueColumn: \"_value\")\n  |> map(fn: (r) => ({ _time: r._time, Vehicles:\n      if not exists r._vehicles or r._vehicles == 0.0 then 0.0\n      else if not exists r.line or r.line == 0.0 then 0.0\n      else r._vehicles / r.line * 100.0 } ))\n  |> yield(name: \"device\")\n",
                    "refId": "Vehicles"
                },
                {
                    "hide": false,
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._field == lookup.${period}.f and (r._device == \"_bedroom\" or r._device == \"line\"))\n  |> drop(columns: [\"_location\"])\n  |> pivot(rowKey:[\"_time\"], columnKey: [\"_device\"], valueColumn: \"_value\")\n  |> map(fn: (r) => ({ _time: r._time, Bedrooms:\n      if not exists r._bedroom or r._bedroom == 0.0 then 0.0\n      else if not exists r.line or r.line == 0.0 then 0.0\n      else r._bedroom / r.line * 100.0 } ))\n  |> yield(name: \"device\")\n",
                    "refId": "Bedrooms"
                },
                {
                    "hide": false,
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._field == lookup.${period}.f and (r._device == \"_laundry\" or r._device == \"line\"))\n  |> drop(columns: [\"_location\"])\n  |> pivot(rowKey:[\"_time\"], columnKey: [\"_device\"], valueColumn: \"_value\")\n  |> map(fn: (r) => ({ _time: r._time, Laundry:\n      if not exists r._laundry or r._laundry == 0.0 then 0.0\n      else if not exists r.line or r.line == 0.0 then 0.0\n      else r._laundry / r.line * 100.0 } ))\n  |> yield(name: \"device\")\n",
                    "refId": "Laundry"
                },
                {
                    "hide": false,
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._field == lookup.${period}.f and (r._device == \"hot_water\" or r._device == \"line\"))\n  |> drop(columns: [\"_location\"])\n  |> pivot(rowKey:[\"_time\"], columnKey: [\"_device\"], valueColumn: \"_value\")\n  |> map(fn: (r) => ({ _time: r._time, HotWater:\n      if not exists r.hot_water or r.hot_water == 0.0 then 0.0\n      else if not exists r.line or r.line == 0.0 then 0.0\n      else r.hot_water / r.line * 100.0 } ))\n  |> yield(name: \"device\")\n",
                    "refId": "Hot water"
                },
                {
                    "hide": false,
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._field == lookup.${period}.f and (r._device == \"heatpump\" or r._device == \"line\"))\n  |> drop(columns: [\"_location\"])\n  |> pivot(rowKey:[\"_time\"], columnKey: [\"_device\"], valueColumn: \"_value\")\n  |> map(fn: (r) => ({ _time: r._time, HeatPump:\n      if not exists r.heatpump or r.heatpump == 0.0 then 0.0\n      else if not exists r.line or r.line == 0.0 then 0.0\n      else r.heatpump / r.line * 100.0 } ))\n  |> yield(name: \"device\")\n",
                    "refId": "Heat pump"
                },
                {
                    "hide": false,
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._field == lookup.${period}.f and (r._device == \"_main_floor\" or r._device == \"line\"))\n  |> drop(columns: [\"_location\"])\n  |> last()\n  |> pivot(rowKey:[\"_time\"], columnKey: [\"_device\"], valueColumn: \"_value\")\n  |> map(fn: (r) => ({ _time: r._time, MainFloor:\n      if not exists r._main_floor or r._main_floor == 0.0 then 0.0\n      else if not exists r.line or r.line == 0.0 then 0.0\n      else r._main_floor / r.line * 100.0 } ))\n  |> yield(name: \"device\")\n",
                    "refId": "Main Floor"
                },
                {
                    "hide": false,
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._field == lookup.${period}.f and (r._device == \"metered\" or r._device == \"line\"))\n  |> drop(columns: [\"_location\"])\n  |> pivot(rowKey:[\"_time\"], columnKey: [\"_device\"], valueColumn: \"_value\")\n  |> map(fn: (r) => ({ _time: r._time, Unmetered:\n      if not exists r.metered or r.metered == 0.0 then 0.0\n      else if not exists r.line or r.line == 0.0 then 0.0\n      else if (r.line - r.metered) <= 0.0 then 0.0\n      else (r.line - r.metered) / r.line * 100.0 } ))\n  |> yield(name: \"device\")\n",
                    "refId": "Unmetered"
                }
            ],
            "title": "${period}",
            "type": "piechart"
        },
        {
            "datasource": "${datasource}",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "decimals": 0,
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "red",
                                "value": null
                            }
                        ]
                    },
                    "unit": "none"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 3,
                "w": 2,
                "x": 14,
                "y": 1
            },
            "id": 16,
            "options": {
                "colorMode": "value",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "/^Value$/",
                    "values": false
                },
                "text": {},
                "textMode": "auto"
            },
            "pluginVersion": "8.2.1",
            "targets": [
                {
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._device == \"line\" and r._field == lookup.${period}.f)\n  |> map(fn: (r) => ({ _time: r._time, _value: r._value * 0.001}))\n  |> yield(name: \"consumption\")\n",
                    "refId": "A"
                }
            ],
            "title": "Total",
            "type": "stat"
        },
        {
            "datasource": "${datasource}",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "decimals": 0,
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "red",
                                "value": null
                            }
                        ]
                    },
                    "unit": "none"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 3,
                "w": 2,
                "x": 14,
                "y": 4
            },
            "id": 10,
            "options": {
                "colorMode": "value",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "/^Value$/",
                    "values": false
                },
                "text": {},
                "textMode": "auto"
            },
            "pluginVersion": "8.2.1",
            "targets": [
                {
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._device == \"_kitchen\" and r._field == lookup.${period}.f)\n  |> map(fn: (r) => ({ _time: r._time, _value: r._value * 0.001}))\n  |> yield(name: \"consumption\")\n",
                    "refId": "A"
                }
            ],
            "title": "Kitchen",
            "type": "stat"
        },
        {
            "datasource": "${datasource}",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "decimals": 0,
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "red",
                                "value": null
                            }
                        ]
                    },
                    "unit": "none"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 3,
                "w": 2,
                "x": 14,
                "y": 7
            },
            "id": 12,
            "options": {
                "colorMode": "value",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "/^Value$/",
                    "values": false
                },
                "text": {},
                "textMode": "auto"
            },
            "pluginVersion": "8.2.1",
            "targets": [
                {
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._device == \"heatpump\" and r._field == lookup.${period}.f)\n  |> map(fn: (r) => ({ _time: r._time, _value: r._value * 0.001}))\n  |> yield(name: \"consumption\")\n",
                    "refId": "A"
                }
            ],
            "title": "Heat pump",
            "type": "stat"
        },
        {
            "datasource": "${datasource}",
            "description": "",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "fixed"
                    },
                    "custom": {
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": -1,
                        "drawStyle": "bars",
                        "fillOpacity": 100,
                        "gradientMode": "none",
                        "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                        },
                        "lineInterpolation": "linear",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                            "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": false,
                        "stacking": {
                            "group": "A",
                            "mode": "none"
                        },
                        "thresholdsStyle": {
                            "mode": "off"
                        }
                    },
                    "decimals": 0,
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            }
                        ]
                    },
                    "unit": "kWh"
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "Production"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "fixedColor": "green",
                                    "mode": "fixed"
                                }
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "Consumption"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "fixedColor": "red",
                                    "mode": "fixed"
                                }
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "Trend"
                        },
                        "properties": [
                            {
                                "id": "custom.drawStyle",
                                "value": "line"
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 4
                            },
                            {
                                "id": "custom.fillOpacity",
                                "value": 0
                            },
                            {
                                "id": "color",
                                "value": {
                                    "fixedColor": "yellow",
                                    "mode": "fixed"
                                }
                            },
                            {
                                "id": "thresholds",
                                "value": {
                                    "mode": "absolute",
                                    "steps": [
                                        {
                                            "color": "green",
                                            "value": null
                                        },
                                        {
                                            "color": "red",
                                            "value": -200
                                        },
                                        {
                                            "color": "yellow",
                                            "value": 0
                                        }
                                    ]
                                }
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "_movavg"
                        },
                        "properties": [
                            {
                                "id": "custom.drawStyle",
                                "value": "points"
                            },
                            {
                                "id": "custom.fillOpacity",
                                "value": 0
                            },
                            {
                                "id": "custom.pointSize",
                                "value": 1
                            },
                            {
                                "id": "custom.hideFrom",
                                "value": {
                                    "legend": true,
                                    "tooltip": true,
                                    "viz": true
                                }
                            }
                        ]
                    }
                ]
            },
            "gridPos": {
                "h": 8,
                "w": 7,
                "x": 0,
                "y": 8
            },
            "id": 52,
            "options": {
                "legend": {
                    "calcs": [],
                    "displayMode": "hidden",
                    "placement": "bottom"
                },
                "tooltip": {
                    "mode": "single"
                }
            },
            "pluginVersion": "8.1.5",
            "targets": [
                {
                    "groupBy": [
                        {
                            "params": [
                                "$__interval"
                            ],
                            "type": "time"
                        },
                        {
                            "params": [
                                "null"
                            ],
                            "type": "fill"
                        }
                    ],
                    "hide": false,
                    "orderByTime": "ASC",
                    "policy": "default",
                    "query": "from(bucket: \"multisma2\")\n  |> range(start: -31d)\n  |> filter(fn: (r) => r._measurement == \"production\" and r._inverter == \"site\" and r._field == \"today\")\n  |> map(fn: (r) => ({ _time: r._time, Production: r._value }))\n  |> yield(name: \"production\")\n",
                    "refId": "A",
                    "resultFormat": "time_series",
                    "select": [
                        [
                            {
                                "params": [
                                    "value"
                                ],
                                "type": "field"
                            },
                            {
                                "params": [],
                                "type": "mean"
                            }
                        ]
                    ],
                    "tags": []
                },
                {
                    "hide": false,
                    "query": "from(bucket: \"cs24\")\n  |> range(start: -31d)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._device == \"line\" and r._field == \"today\")\n  |> map(fn: (r) => ({ _time: r._time, Consumption: r._value * -0.001}))\n  |> yield(name: \"consumption\")\n",
                    "refId": "B"
                },
                {
                    "hide": false,
                    "query": "c1 = from(bucket: \"cs24\")\n  |> range(start: -60d)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"energy\")\n  |> filter(fn: (r) => r[\"_device\"] == \"line\")\n  |> filter(fn: (r) => r[\"_field\"] == \"today\")\n  |> movingAverage(n: 30)\n  |> map(fn: (r) => ({ _time: r._time, _movavg: r._value * -0.001}))\n  |> yield(name: \"c1\")\n\nm1 = from(bucket: \"multisma2\")\n  |> range(start: -60d)\n  |> filter(fn: (r) => r._measurement == \"production\" and r._inverter == \"site\" and r._field == \"today\")\n  |> movingAverage(n: 30)\n  |> map(fn: (r) => ({ _time: r._time, _movavg: r._value }))\n  |> yield(name: \"m1\")\n\njoin(tables: {d1: c1, d2: m1}, on: [\"_time\"])\n  |> drop(columns: [\"_movavg\"])\n  |> map(fn: (r) => ({ _time: r._time, Trend: r._movavg_d1 + r._movavg_d2}))\n  |> yield(name: \"c1m1\")\n",
                    "refId": "C"
                }
            ],
            "timeFrom": "31d",
            "timeShift": null,
            "title": "30 Day Trend",
            "transformations": [],
            "type": "timeseries"
        },
        {
            "datasource": "${datasource}",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "palette-classic"
                    },
                    "custom": {
                        "axisLabel": "",
                        "axisPlacement": "left",
                        "axisSoftMax": 10000,
                        "axisSoftMin": 0,
                        "barAlignment": 0,
                        "drawStyle": "line",
                        "fillOpacity": 0,
                        "gradientMode": "none",
                        "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                        },
                        "lineInterpolation": "linear",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                            "type": "linear"
                        },
                        "showPoints": "auto",
                        "spanNulls": false,
                        "stacking": {
                            "group": "A",
                            "mode": "none"
                        },
                        "thresholdsStyle": {
                            "mode": "off"
                        }
                    },
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            }
                        ]
                    },
                    "unit": "watt"
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "line"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "Line"
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "l1"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "L1"
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "l2"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "L2"
                            }
                        ]
                    }
                ]
            },
            "gridPos": {
                "h": 8,
                "w": 7,
                "x": 7,
                "y": 8
            },
            "id": 2,
            "options": {
                "legend": {
                    "calcs": [],
                    "displayMode": "list",
                    "placement": "bottom"
                },
                "tooltip": {
                    "mode": "multi"
                }
            },
            "targets": [
                {
                    "query": "from(bucket: \"cs24\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"power\")\n  |> filter(fn: (r) => r[\"_field\"] == \"line\" or r[\"_field\"] == \"l1\" or r[\"_field\"] == \"l2\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> yield(name: \"mean\")",
                    "refId": "A"
                }
            ],
            "title": "Line Characteristics",
            "type": "timeseries"
        },
        {
            "datasource": "${datasource}",
            "description": "",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "fixedColor": "red",
                        "mode": "fixed"
                    },
                    "decimals": 0,
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            }
                        ]
                    },
                    "unit": "kwatth"
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "EVCharging"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "EV Charging"
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "HotWater"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "Hot Water"
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "Heatpump"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "Heat Pump"
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "MainFloor"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "Main Floor"
                            }
                        ]
                    }
                ]
            },
            "gridPos": {
                "h": 8,
                "w": 8,
                "x": 16,
                "y": 8
            },
            "id": 61,
            "options": {
                "displayMode": "basic",
                "orientation": "vertical",
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                },
                "showUnfilled": false,
                "text": {}
            },
            "pluginVersion": "8.2.1",
            "repeatDirection": "h",
            "targets": [
                {
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._field == lookup.${period}.f and r._device == \"_kitchen\")\n  |> map(fn: (r) => ({ _value: r._device, Kitchen: r._value * 0.001 } ))\n  |> toString()\n  |> yield(name: \"kitchen\")\n",
                    "refId": "Kitchen"
                },
                {
                    "hide": false,
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._field == lookup.${period}.f and r._device == \"_basement\")\n  |> map(fn: (r) => ({ _value: r._device, Basement: r._value * 0.001 } ))\n  |> toString()\n  |> yield(name: \"basement\")\n",
                    "refId": "Basement"
                },
                {
                    "hide": false,
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._field == lookup.${period}.f and r._device == \"_vehicles\")\n  |> map(fn: (r) => ({ _value: r._device, EVCharging: r._value * 0.001 } ))\n  |> toString()\n  |> yield(name: \"vehicles\")\n",
                    "refId": "Vehicles"
                },
                {
                    "hide": false,
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._field == lookup.${period}.f and r._device == \"_bedroom\")\n  |> map(fn: (r) => ({ _value: r._device, Bedrooms: r._value * 0.001 } ))\n  |> toString()\n  |> yield(name: \"bedroom\")\n",
                    "refId": "Bedrooms"
                },
                {
                    "hide": false,
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._field == lookup.${period}.f and r._device == \"_laundry\")\n  |> map(fn: (r) => ({ _value: r._device, Laundry: r._value * 0.001 } ))\n  |> toString()\n  |> yield(name: \"laundry\")\n",
                    "refId": "Laundry"
                },
                {
                    "hide": false,
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._field == lookup.${period}.f and r._device == \"hot_water\")\n  |> map(fn: (r) => ({ _value: r._device, HotWater: r._value * 0.001 } ))\n  |> toString()\n  |> yield(name: \"hotwater\")\n",
                    "refId": "Hot water"
                },
                {
                    "hide": false,
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._field == lookup.${period}.f and r._device == \"heatpump\")\n  |> map(fn: (r) => ({ _value: r._device, Heatpump: r._value * 0.001 } ))\n  |> toString()\n  |> yield(name: \"heatpump\")\n",
                    "refId": "Heat pump"
                },
                {
                    "hide": false,
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._field == lookup.${period}.f and r._device == \"_main_floor\")\n  |> map(fn: (r) => ({ _value: r._device, MainFloor: r._value * 0.001 } ))\n  |> toString()\n  |> yield(name: \"mainfloor\")\n",
                    "refId": "Main Floor"
                },
                {
                    "hide": true,
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._field == lookup.${period}.f and (r._device == \"metered\" or r._device == \"line\"))\n  |> drop(columns: [\"_location\"])\n  |> pivot(rowKey:[\"_time\"], columnKey: [\"_device\"], valueColumn: \"_value\")\n  |> map(fn: (r) => ({ _value: r._device, Unmetered: (r.line - r.metered) * 0.001 } ))\n  |> toString()\n  |> yield(name: \"unmetered\")\n",
                    "refId": "Unmetered"
                }
            ],
            "title": "${period} Use (kWh) ",
            "type": "bargauge"
        },
        {
            "datasource": "${datasource}",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "decimals": 0,
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "red",
                                "value": null
                            }
                        ]
                    },
                    "unit": "none"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 3,
                "w": 2,
                "x": 14,
                "y": 10
            },
            "id": 26,
            "options": {
                "colorMode": "value",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "/^Value$/",
                    "values": false
                },
                "text": {},
                "textMode": "auto"
            },
            "pluginVersion": "8.2.1",
            "targets": [
                {
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._device == \"hot_water\" and r._field == lookup.${period}.f)\n  |> map(fn: (r) => ({ _time: r._time, _value: r._value * 0.001}))\n  |> yield(name: \"hot_water\")\n",
                    "refId": "A"
                }
            ],
            "title": "Hot water",
            "type": "stat"
        },
        {
            "datasource": "${datasource}",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "decimals": 0,
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "red",
                                "value": null
                            }
                        ]
                    },
                    "unit": "none"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 3,
                "w": 2,
                "x": 14,
                "y": 13
            },
            "id": 14,
            "options": {
                "colorMode": "value",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "/^Value$/",
                    "values": false
                },
                "text": {},
                "textMode": "auto"
            },
            "pluginVersion": "8.2.1",
            "targets": [
                {
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._device == \"_vehicles\" and r._field == lookup.${period}.f)\n  |> map(fn: (r) => ({ _time: r._time, _value: r._value * 0.001}))\n  |> yield(name: \"_vehicles\")\n",
                    "refId": "A"
                }
            ],
            "title": "EV Charging",
            "type": "stat"
        },
        {
            "datasource": "${datasource}",
            "description": "",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "fixedColor": "red",
                        "mode": "fixed"
                    },
                    "custom": {
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "axisSoftMax": 1000,
                        "barAlignment": 0,
                        "drawStyle": "bars",
                        "fillOpacity": 100,
                        "gradientMode": "none",
                        "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                        },
                        "lineInterpolation": "linear",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                            "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": false,
                        "stacking": {
                            "group": "A",
                            "mode": "none"
                        },
                        "thresholdsStyle": {
                            "mode": "off"
                        }
                    },
                    "decimals": 0,
                    "mappings": [],
                    "min": 0,
                    "noValue": "0",
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "red",
                                "value": null
                            }
                        ]
                    },
                    "unit": "kWh"
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "Current"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "fixedColor": "light-red",
                                    "mode": "fixed"
                                }
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "Previous"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "fixedColor": "dark-red",
                                    "mode": "fixed"
                                }
                            }
                        ]
                    }
                ]
            },
            "gridPos": {
                "h": 8,
                "w": 7,
                "x": 0,
                "y": 16
            },
            "hideTimeOverride": false,
            "id": 48,
            "options": {
                "legend": {
                    "calcs": [],
                    "displayMode": "hidden",
                    "placement": "bottom"
                },
                "tooltip": {
                    "mode": "single"
                }
            },
            "pluginVersion": "8.1.5",
            "targets": [
                {
                    "groupBy": [
                        {
                            "params": [
                                "$__interval"
                            ],
                            "type": "time"
                        },
                        {
                            "params": [
                                "null"
                            ],
                            "type": "fill"
                        }
                    ],
                    "hide": false,
                    "orderByTime": "ASC",
                    "policy": "default",
                    "query": "from(bucket: \"cs24\")\n  |> range(start: -13mo, stop: -1mo)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"energy\")\n  |> filter(fn: (r) => r[\"_device\"] == \"line\")\n  |> filter(fn: (r) => r[\"_field\"] == \"month\")\n  |> map(fn: (r) => ({ _time: r._time, Previous: r._value * 0.001}))\n  |> yield(name: \"past\")\n",
                    "refId": "A",
                    "resultFormat": "time_series",
                    "select": [
                        [
                            {
                                "params": [
                                    "value"
                                ],
                                "type": "field"
                            },
                            {
                                "params": [],
                                "type": "mean"
                            }
                        ]
                    ],
                    "tags": []
                },
                {
                    "hide": false,
                    "query": "from(bucket: \"cs24\")\n  |> range(start: -1mo)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"energy\")\n  |> filter(fn: (r) => r[\"_device\"] == \"line\")\n  |> filter(fn: (r) => r[\"_field\"] == \"month\")\n  |> map(fn: (r) => ({ _time: r._time, Current: r._value * 0.001}))\n  |> yield(name: \"current\")\n",
                    "refId": "B"
                }
            ],
            "timeFrom": "13M",
            "timeShift": null,
            "title": "12 Month Use",
            "transformations": [],
            "type": "timeseries"
        },
        {
            "datasource": "${datasource}",
            "description": "",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "palette-classic"
                    },
                    "custom": {
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "axisSoftMax": 2000,
                        "barAlignment": 0,
                        "drawStyle": "line",
                        "fillOpacity": 0,
                        "gradientMode": "none",
                        "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                        },
                        "lineInterpolation": "linear",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                            "type": "linear"
                        },
                        "showPoints": "auto",
                        "spanNulls": false,
                        "stacking": {
                            "group": "A",
                            "mode": "none"
                        },
                        "thresholdsStyle": {
                            "mode": "off"
                        }
                    },
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            }
                        ]
                    },
                    "unit": "watt"
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "dishwasher kitchen"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "Dishwasher"
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "microwave kitchen"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "Microwave"
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "range kitchen"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "Range"
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "refrigerator kitchen"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "Refrigerator "
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "Outlets"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "Outlets"
                            }
                        ]
                    }
                ]
            },
            "gridPos": {
                "h": 8,
                "w": 7,
                "x": 7,
                "y": 16
            },
            "id": 6,
            "options": {
                "legend": {
                    "calcs": [],
                    "displayMode": "list",
                    "placement": "bottom"
                },
                "tooltip": {
                    "mode": "single"
                }
            },
            "targets": [
                {
                    "query": "from(bucket: \"cs24\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"power\" and r._location == \"kitchen\" and r._field != \"outlets_1\" and r._field != \"outlets_2\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> yield(name: \"the_rest\")",
                    "refId": "TheRest"
                },
                {
                    "hide": false,
                    "query": "from(bucket: \"cs24\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"power\" and r._location == \"kitchen\" and r._field == \"outlets_1\" or r._field == \"outlets_2\")\n  |> truncateTimeColumn(unit: 10s)\n  |> pivot(rowKey:[\"_time\"], columnKey: [\"_field\"], valueColumn: \"_value\")\n  |> map(fn: (r) => ({ r with _value: r.outlets_1 + r.outlets_2 }))\n  |> drop(columns: [\"outlets_1\", \"outlets_2\"])\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> yield(name: \"outlets\")\n",
                    "refId": "Outlets"
                }
            ],
            "title": "Kitchen",
            "type": "timeseries"
        },
        {
            "datasource": "${datasource}",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "decimals": 0,
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "red",
                                "value": null
                            }
                        ]
                    },
                    "unit": "none"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 3,
                "w": 2,
                "x": 14,
                "y": 16
            },
            "id": 31,
            "options": {
                "colorMode": "value",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "/^Value$/",
                    "values": false
                },
                "text": {},
                "textMode": "auto"
            },
            "pluginVersion": "8.2.1",
            "targets": [
                {
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._device == \"_bedroom\" and r._field == lookup.${period}.f)\n  |> map(fn: (r) => ({ _time: r._time, _value: r._value * 0.001}))\n  |> yield(name: \"_bedroom\")\n",
                    "refId": "A"
                }
            ],
            "title": "Bedrooms",
            "type": "stat"
        },
        {
            "datasource": "${datasource}",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "fixedColor": "red",
                        "mode": "fixed"
                    },
                    "custom": {
                        "axisLabel": "",
                        "axisPlacement": "hidden",
                        "axisSoftMin": 0,
                        "fillOpacity": 80,
                        "gradientMode": "none",
                        "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                        },
                        "lineWidth": 1
                    },
                    "mappings": [
                        {
                            "options": {
                                "_basement": {
                                    "color": "text",
                                    "index": 2,
                                    "text": "Basement"
                                },
                                "_bedroom": {
                                    "color": "text",
                                    "index": 3,
                                    "text": "Bedrooms"
                                },
                                "_kitchen": {
                                    "color": "text",
                                    "index": 5,
                                    "text": "Kitchen"
                                },
                                "_laundry": {
                                    "color": "text",
                                    "index": 6,
                                    "text": "Laundry"
                                },
                                "_main_floor": {
                                    "color": "text",
                                    "index": 7,
                                    "text": "Main Floor"
                                },
                                "_vehicles": {
                                    "color": "text",
                                    "index": 4,
                                    "text": "EV Charging"
                                },
                                "heatpump": {
                                    "color": "text",
                                    "index": 0,
                                    "text": "Heat Pump"
                                },
                                "hot_water": {
                                    "color": "text",
                                    "index": 1,
                                    "text": "Hot Water"
                                }
                            },
                            "type": "value"
                        }
                    ],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            }
                        ]
                    },
                    "unit": "kwatth"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 8,
                "w": 8,
                "x": 16,
                "y": 16
            },
            "id": 63,
            "options": {
                "barWidth": 0.5,
                "groupWidth": 0.7,
                "legend": {
                    "calcs": [],
                    "displayMode": "hidden",
                    "placement": "bottom"
                },
                "orientation": "vertical",
                "showValue": "never",
                "stacking": "none",
                "text": {},
                "tooltip": {
                    "mode": "single"
                }
            },
            "targets": [
                {
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._field == lookup.${period}.f)\n  |> filter(fn: (r) => r._device == \"heatpump\" or\n                       r._device == \"hot_water\" or\n                       r._device == \"_kitchen\" or\n                       r._device == \"_laundry\" or\n                       r._device == \"_bedroom\" or\n                       r._device == \"_basement\" or\n                       r._device == \"_main_floor\" or\n                       r._device == \"_vehicles\"\n                    )\n  |> map(fn: (r) => ({ _value: r._device, kWh: r._value * 0.001 }))\n  |> toString()\n  |> drop(columns: [\"_start\", \"_stop\", \"_measurement\", \"_field\"])\n  |> yield(name: \"use_by_location\")\n",
                    "refId": "A"
                }
            ],
            "title": "${period} Use (kWh)",
            "type": "barchart"
        },
        {
            "datasource": "${datasource}",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "decimals": 0,
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "red",
                                "value": null
                            }
                        ]
                    },
                    "unit": "none"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 3,
                "w": 2,
                "x": 14,
                "y": 19
            },
            "id": 34,
            "options": {
                "colorMode": "value",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "/^Value$/",
                    "values": false
                },
                "text": {},
                "textMode": "auto"
            },
            "pluginVersion": "8.2.1",
            "targets": [
                {
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._device == \"_basement\" and r._field == lookup.${period}.f)\n  |> map(fn: (r) => ({ _time: r._time, _value: r._value * 0.001}))\n  |> yield(name: \"_basement\")\n",
                    "refId": "A"
                }
            ],
            "title": "Basement",
            "type": "stat"
        },
        {
            "datasource": "${datasource}",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "decimals": 0,
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "red",
                                "value": null
                            }
                        ]
                    },
                    "unit": "none"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 3,
                "w": 2,
                "x": 14,
                "y": 22
            },
            "id": 37,
            "options": {
                "colorMode": "value",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "/^Value$/",
                    "values": false
                },
                "text": {},
                "textMode": "auto"
            },
            "pluginVersion": "8.2.1",
            "targets": [
                {
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._device == \"_laundry\" and r._field == lookup.${period}.f)\n  |> map(fn: (r) => ({ _time: r._time, _value: r._value * 0.001}))\n  |> yield(name: \"laundry\")\n",
                    "refId": "A"
                }
            ],
            "title": "Laundry",
            "type": "stat"
        },
        {
            "datasource": "${datasource}",
            "description": "",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "fixedColor": "red",
                        "mode": "fixed"
                    },
                    "custom": {
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "drawStyle": "bars",
                        "fillOpacity": 100,
                        "gradientMode": "none",
                        "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                        },
                        "lineInterpolation": "linear",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                            "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": false,
                        "stacking": {
                            "group": "A",
                            "mode": "none"
                        },
                        "thresholdsStyle": {
                            "mode": "off"
                        }
                    },
                    "decimals": 0,
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            }
                        ]
                    },
                    "unit": "kWh"
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "MovingAverage"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "fixedColor": "light-orange",
                                    "mode": "fixed"
                                }
                            },
                            {
                                "id": "custom.lineWidth",
                                "value": 4
                            },
                            {
                                "id": "displayName",
                                "value": "Moving Average"
                            },
                            {
                                "id": "custom.lineInterpolation",
                                "value": "smooth"
                            },
                            {
                                "id": "custom.drawStyle",
                                "value": "line"
                            },
                            {
                                "id": "custom.fillOpacity",
                                "value": 0
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "Current"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "fixedColor": "light-red",
                                    "mode": "fixed"
                                }
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "Previous"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "fixedColor": "dark-red",
                                    "mode": "fixed"
                                }
                            }
                        ]
                    }
                ]
            },
            "gridPos": {
                "h": 8,
                "w": 7,
                "x": 0,
                "y": 24
            },
            "id": 46,
            "options": {
                "legend": {
                    "calcs": [],
                    "displayMode": "hidden",
                    "placement": "right"
                },
                "tooltip": {
                    "mode": "single"
                }
            },
            "pluginVersion": "8.1.5",
            "targets": [
                {
                    "groupBy": [
                        {
                            "params": [
                                "$__interval"
                            ],
                            "type": "time"
                        },
                        {
                            "params": [
                                "null"
                            ],
                            "type": "fill"
                        }
                    ],
                    "hide": false,
                    "orderByTime": "ASC",
                    "policy": "default",
                    "query": "from(bucket: \"cs24\")\n  |> range(start: -31d, stop: -1d)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"energy\")\n  |> filter(fn: (r) => r[\"_device\"] == \"line\")\n  |> filter(fn: (r) => r[\"_field\"] == \"today\")\n  |> map(fn: (r) => ({ _time: r._time, Previous: r._value * 0.001}))\n  |> yield(name: \"previous\")\n",
                    "refId": "Previous",
                    "resultFormat": "time_series",
                    "select": [
                        [
                            {
                                "params": [
                                    "value"
                                ],
                                "type": "field"
                            },
                            {
                                "params": [],
                                "type": "mean"
                            }
                        ]
                    ],
                    "tags": []
                },
                {
                    "hide": false,
                    "query": "from(bucket: \"cs24\")\n  |> range(start: -1d)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"energy\")\n  |> filter(fn: (r) => r[\"_device\"] == \"line\")\n  |> filter(fn: (r) => r[\"_field\"] == \"today\")\n  |> map(fn: (r) => ({ _time: r._time, Current: r._value * 0.001}))\n  |> yield(name: \"current\")\n",
                    "refId": "Current"
                },
                {
                    "groupBy": [
                        {
                            "params": [
                                "$__interval"
                            ],
                            "type": "time"
                        },
                        {
                            "params": [
                                "null"
                            ],
                            "type": "fill"
                        }
                    ],
                    "orderByTime": "ASC",
                    "policy": "default",
                    "query": "from(bucket: \"cs24\")\n  |> range(start: -60d)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"energy\")\n  |> filter(fn: (r) => r[\"_device\"] == \"line\")\n  |> filter(fn: (r) => r[\"_field\"] == \"today\")\n  |> movingAverage(n: 30)\n  |> map(fn: (r) => ({ _time: r._time, MovingAverage: r._value * 0.001}))\n  |> yield(name: \"moving-average\")\n",
                    "refId": "Moving Average",
                    "resultFormat": "time_series",
                    "select": [
                        [
                            {
                                "params": [
                                    "value"
                                ],
                                "type": "field"
                            },
                            {
                                "params": [],
                                "type": "mean"
                            }
                        ]
                    ],
                    "tags": []
                }
            ],
            "timeFrom": "31d",
            "timeShift": null,
            "title": "30 Day Use",
            "transformations": [],
            "type": "timeseries"
        },
        {
            "datasource": "${datasource}",
            "description": "",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "palette-classic"
                    },
                    "custom": {
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "axisSoftMax": 6000,
                        "barAlignment": 0,
                        "drawStyle": "line",
                        "fillOpacity": 0,
                        "gradientMode": "none",
                        "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                        },
                        "lineInterpolation": "linear",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                            "type": "linear"
                        },
                        "showPoints": "auto",
                        "spanNulls": false,
                        "stacking": {
                            "group": "A",
                            "mode": "none"
                        },
                        "thresholdsStyle": {
                            "mode": "off"
                        }
                    },
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            }
                        ]
                    },
                    "unit": "watt"
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "heatpump"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "Heat Pump"
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "hot_water"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "Hot Water"
                            }
                        ]
                    }
                ]
            },
            "gridPos": {
                "h": 8,
                "w": 7,
                "x": 7,
                "y": 24
            },
            "id": 5,
            "options": {
                "legend": {
                    "calcs": [],
                    "displayMode": "list",
                    "placement": "bottom"
                },
                "tooltip": {
                    "mode": "single"
                }
            },
            "targets": [
                {
                    "query": "from(bucket: \"cs24\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"power\" and r._field == \"hot_water\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> yield(name: \"hot_water\")",
                    "refId": "Hot Water"
                },
                {
                    "hide": false,
                    "query": "from(bucket: \"cs24\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"power\" and r._field == \"heatpump\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> yield(name: \"heatpump\")",
                    "refId": "Heat Pump"
                }
            ],
            "title": "Heatpump & Hot Water",
            "type": "timeseries"
        },
        {
            "datasource": "${datasource}",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "red",
                                "value": null
                            }
                        ]
                    },
                    "unit": "watt"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 7,
                "w": 4,
                "x": 16,
                "y": 24
            },
            "id": 8,
            "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                },
                "text": {
                    "valueSize": 75
                },
                "textMode": "auto"
            },
            "pluginVersion": "8.2.1",
            "targets": [
                {
                    "query": "from(bucket: \"cs24\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"power\")\n  |> filter(fn: (r) => r[\"_field\"] == \"line\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> yield(name: \"mean\")",
                    "refId": "A"
                }
            ],
            "title": "Current Load",
            "type": "stat"
        },
        {
            "datasource": "${datasource}",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "decimals": 0,
                    "mappings": [],
                    "max": 20000,
                    "min": -20000,
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            },
                            {
                                "color": "light-red",
                                "value": -20000
                            },
                            {
                                "color": "light-green",
                                "value": 0
                            }
                        ]
                    },
                    "unit": "watt"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 8,
                "w": 4,
                "x": 20,
                "y": 24
            },
            "id": 59,
            "options": {
                "orientation": "auto",
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "/^Delta$/",
                    "values": false
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": true,
                "text": {}
            },
            "pluginVersion": "8.2.1",
            "targets": [
                {
                    "query": "production = from(bucket: \"multisma2\")\n  |> range(start: -10m)\n  |> filter(fn: (r) => r._measurement == \"ac_measurements\" and r._field == \"power\" and r._inverter == \"site\")\n  |> drop(columns: [\"_inverter\", \"_measurement\", \"_start\", \"_stop\"])\n  |> last()\n  |> yield(name: \"production\")\n  \nconsumption = from(bucket: \"cs24\")\n  |> range(start: -10m)\n  |> filter(fn: (r) => r._measurement == \"power\" and r._field == \"line\")\n  |> map(fn: (r) => ({ r with _time: r._time, _value: r._value * -1.0 }))\n  |> drop(columns: [\"_measurement\", \"_start\", \"_stop\"])\n  |> last()\n  |> yield(name: \"consumption\")\n\nunion(tables: [production, consumption])\n  |> truncateTimeColumn(unit: 10m)\n  |> pivot(rowKey:[\"_time\"], columnKey: [\"_field\"], valueColumn: \"_value\")\n  |> map(fn: (r) => ({ r with Delta: float(v: r.power) + r.line }))\n  |> yield(name: \"union\")\n",
                    "refId": "A"
                }
            ],
            "title": "Net Power",
            "type": "gauge"
        },
        {
            "datasource": "${datasource}",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "decimals": 0,
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "red",
                                "value": null
                            }
                        ]
                    },
                    "unit": "none"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 3,
                "w": 2,
                "x": 14,
                "y": 25
            },
            "id": 40,
            "options": {
                "colorMode": "value",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "/^Value$/",
                    "values": false
                },
                "text": {},
                "textMode": "auto"
            },
            "pluginVersion": "8.2.1",
            "targets": [
                {
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._device == \"_main_floor\" and r._field == lookup.${period}.f)\n  |> map(fn: (r) => ({ _time: r._time, _value: r._value * 0.001}))\n  |> yield(name: \"_main_floor\")\n",
                    "refId": "A"
                }
            ],
            "title": "Main Floor",
            "type": "stat"
        },
        {
            "datasource": "${datasource}",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "decimals": 0,
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "red",
                                "value": null
                            }
                        ]
                    },
                    "unit": "none"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 3,
                "w": 2,
                "x": 14,
                "y": 28
            },
            "id": 69,
            "options": {
                "colorMode": "value",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "/^Value$/",
                    "values": false
                },
                "text": {},
                "textMode": "auto"
            },
            "pluginVersion": "8.2.1",
            "targets": [
                {
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._field == lookup.${period}.f)\n  |> filter(fn: (r) => r._device == \"metered\" or r._device == \"line\")\n  |> pivot(rowKey:[\"_time\"], columnKey: [\"_device\"], valueColumn: \"_value\")\n  |> map(fn: (r) => ({ _time: r._time, _value: (r.line - r.metered) * 0.001}))\n  |> yield(name: \"unmetered\")\n",
                    "refId": "A"
                }
            ],
            "title": "Unmetered",
            "type": "stat"
        },
        {
            "datasource": "${datasource}",
            "description": "",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "palette-classic"
                    },
                    "custom": {
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "axisSoftMax": 10000,
                        "axisSoftMin": 0,
                        "barAlignment": 0,
                        "drawStyle": "line",
                        "fillOpacity": 0,
                        "gradientMode": "none",
                        "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                        },
                        "lineInterpolation": "linear",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                            "type": "linear"
                        },
                        "showPoints": "auto",
                        "spanNulls": false,
                        "stacking": {
                            "group": "A",
                            "mode": "none"
                        },
                        "thresholdsStyle": {
                            "mode": "off"
                        }
                    },
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            }
                        ]
                    },
                    "unit": "watt"
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "juicebox vehicles"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "Juicebox"
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "tesla vehicles"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "Tesla HPWC"
                            }
                        ]
                    }
                ]
            },
            "gridPos": {
                "h": 8,
                "w": 7,
                "x": 0,
                "y": 32
            },
            "id": 4,
            "options": {
                "legend": {
                    "calcs": [],
                    "displayMode": "list",
                    "placement": "bottom"
                },
                "tooltip": {
                    "mode": "single"
                }
            },
            "targets": [
                {
                    "query": "from(bucket: \"cs24\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"power\")\n  |> filter(fn: (r) => r[\"_location\"] == \"vehicles\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> yield(name: \"vehicles\")",
                    "refId": "A"
                }
            ],
            "title": "EV Charging",
            "type": "timeseries"
        },
        {
            "datasource": "${datasource}",
            "description": "",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "palette-classic"
                    },
                    "custom": {
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "axisSoftMax": 2000,
                        "barAlignment": 0,
                        "drawStyle": "line",
                        "fillOpacity": 0,
                        "gradientMode": "none",
                        "hideFrom": {
                            "legend": false,
                            "tooltip": false,
                            "viz": false
                        },
                        "lineInterpolation": "linear",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                            "type": "linear"
                        },
                        "showPoints": "auto",
                        "spanNulls": false,
                        "stacking": {
                            "group": "A",
                            "mode": "none"
                        },
                        "thresholdsStyle": {
                            "mode": "off"
                        }
                    },
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            }
                        ]
                    },
                    "unit": "watt"
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "dryer laundry"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "Dryer"
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "washer laundry"
                        },
                        "properties": [
                            {
                                "id": "displayName",
                                "value": "Washer"
                            }
                        ]
                    }
                ]
            },
            "gridPos": {
                "h": 8,
                "w": 7,
                "x": 7,
                "y": 32
            },
            "id": 60,
            "options": {
                "legend": {
                    "calcs": [],
                    "displayMode": "list",
                    "placement": "bottom"
                },
                "tooltip": {
                    "mode": "multi"
                }
            },
            "targets": [
                {
                    "query": "from(bucket: \"cs24\")\n  |> range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |> filter(fn: (r) => r._measurement == \"power\" and r._location == \"laundry\")\n  |> aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |> yield(name: \"laundry\")",
                    "refId": "TheRest"
                }
            ],
            "title": "Laundry",
            "type": "timeseries"
        },
        {
            "datasource": "${datasource}",
            "description": "",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "fixedColor": "blue",
                        "mode": "fixed"
                    },
                    "decimals": 0,
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            }
                        ]
                    },
                    "unit": "none"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 6,
                "w": 8,
                "x": 16,
                "y": 32
            },
            "id": 67,
            "options": {
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                },
                "text": {},
                "textMode": "auto"
            },
            "pluginVersion": "8.2.1",
            "targets": [
                {
                    "query": "lookup = {Today: {p: -1d, f: \"today\"}, Month: {p: -1mo, f: \"month\"}, Year: {p: -1y, f: \"year\"}}\nfrom(bucket: \"cs24\")\n  |> range(start: lookup.${period}.p)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._device == \"delta_wh\" and r._field == lookup.${period}.f)\n  |> map(fn: (r) => ({ r with _value: r._value * 0.001 }))\n  |> yield(name: \"delta_wh\")\n",
                    "refId": "A"
                }
            ],
            "title": "Electric Meter Change: ${period}",
            "type": "stat"
        },
        {
            "datasource": "${datasource}",
            "description": "",
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "fixedColor": "blue",
                        "mode": "fixed"
                    },
                    "decimals": 0,
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "green",
                                "value": null
                            }
                        ]
                    },
                    "unit": "none"
                },
                "overrides": []
            },
            "gridPos": {
                "h": 6,
                "w": 8,
                "x": 16,
                "y": 38
            },
            "id": 68,
            "options": {
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "/^_value$/",
                    "values": false
                },
                "text": {},
                "textMode": "auto"
            },
            "pluginVersion": "8.2.1",
            "targets": [
                {
                    "query": "from(bucket: \"cs24\")\n  |> range(start: -1d)\n  |> filter(fn: (r) => r._measurement == \"energy\" and r._field == \"today\")\n  |> filter(fn: (r) => r._device == \"meter_reading\" or r._device == \"delta_wh\")\n  |> pivot(rowKey:[\"_time\"], columnKey: [\"_device\"], valueColumn: \"_value\")\n  |> map(fn: (r) => ({ r with _value: (r.delta_wh * 0.001) + r.meter_reading }))\n  |> drop(columns: [\"_start\", \"_stop\", \"delta_wh\", \"meter_reading\"])\n  |> map(fn: (r) => ({ _value: if r._value < 0 then 100000.0 + r._value else r._value } ))\n  |> yield(name: \"meter_reading\")",
                    "refId": "A"
                }
            ],
            "title": "Electric Meter",
            "type": "stat"
        }
    ],
    "refresh": "",
    "schemaVersion": 31,
    "style": "dark",
    "tags": [],
    "templating": {
        "list": [
            {
                "current": {
                    "selected": false,
                    "text": "parkerlane",
                    "value": "parkerlane"
                },
                "description": "InfluxDB source of CS24 data",
                "error": null,
                "hide": 0,
                "includeAll": false,
                "label": "Data Source",
                "multi": false,
                "name": "datasource",
                "options": [],
                "query": "influxdb",
                "queryValue": "",
                "refresh": 1,
                "regex": "parkerlane|dundee",
                "skipUrlSync": false,
                "type": "datasource"
            },
            {
                "allValue": null,
                "current": {
                    "selected": true,
                    "text": "Today",
                    "value": "Today"
                },
                "description": null,
                "error": null,
                "hide": 0,
                "includeAll": false,
                "label": "Display Period",
                "multi": false,
                "name": "period",
                "options": [
                    {
                        "selected": true,
                        "text": "Today",
                        "value": "Today"
                    },
                    {
                        "selected": false,
                        "text": "Month",
                        "value": "Month"
                    },
                    {
                        "selected": false,
                        "text": "Year",
                        "value": "Year"
                    }
                ],
                "query": "Today, Month, Year",
                "queryValue": "",
                "skipUrlSync": false,
                "type": "custom"
            },
            {
                "description": null,
                "error": null,
                "hide": 2,
                "label": "Electric Meter",
                "name": "electric_meter",
                "query": "-4580",
                "skipUrlSync": false,
                "type": "constant"
            }
        ]
    },
    "time": {
        "from": "now-24h",
        "to": "now"
    },
    "timepicker": {},
    "timezone": "",
    "title": "CircuitSetup",
    "uid": "_-Qzs-Dnx",
    "version": 30
}